{% extends "base.html" %}
{% block content %}

  <div class="card">
    <h1 style="margin:0 0 8px;">Timetable</h1>
    <p style="margin:0; color: var(--muted);">
      Display timetable for a selected class.
    </p>

    <form method="get" action="/timetable" style="margin-top: 12px;">
      <div class="actions">
        <div class="field" style="min-width: 260px; margin:0;">
          <label for="class_id">Class</label>
          <select name="class_id" id="class_id">
            <option value="">— choose —</option>
            {% for c in classes %}
              <option value="{{ c.id_class }}" {% if selected_class_id == c.id_class %}selected{% endif %}>
                {{ c.name }} ({{ c.school_year }})
              </option>
            {% endfor %}
          </select>
        </div>

        <button class="btn btn-primary" type="submit">Show</button>
      </div>
    </form>
  </div>

  {% if selected_class_id %}
    <div class="card" style="margin-top: 14px;">
      {% if rows and rows|length > 0 %}
        <table class="table">
          <thead>
            <tr>
              <th style="width: 120px;">Weekday (1–5)</th>
              <th style="width: 90px;">Lesson</th>
              <th>Subject</th>
              <th style="width: 220px;">Teacher</th>
              <th style="width: 120px;">Room</th>
            </tr>
          </thead>
          <tbody>
            {% for r in rows %}
              <tr>
                <td>{{ r.weekday }}</td>
                <td>{{ r.lesson_no }}</td>
                <td>{{ r.subject_name }}</td>
                <td>{{ r.teacher_name }}</td>
                <td>{{ r.room }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p style="margin:0; color: var(--muted);">No timetable rows for this class.</p>
      {% endif %}
    </div>
  {% endif %}

{% endblock %}
